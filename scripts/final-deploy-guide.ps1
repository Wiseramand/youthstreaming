# Youth Angola Streaming - Final Deploy Guide
Write-Host "üéØ Final Deploy Guide for Youth Angola Streaming" -ForegroundColor Green

Write-Host ""
Write-Host "üìã Current Status:" -ForegroundColor Cyan
Write-Host "‚úÖ Application: 100% ready for production"
Write-Host "‚úÖ JWT Secret: Strong (128 characters) generated"
Write-Host "‚úÖ SMTP: Configured for email notifications"
Write-Host "‚úÖ Stripe: Configured for payments"
Write-Host "‚úÖ Admin Panel: Complete with VIP user creation"
Write-Host "‚úÖ Streaming: Live and VOD with private links"
Write-Host "‚ö†Ô∏è  Database: Connection issue needs resolution"
Write-Host "‚ö†Ô∏è  Deploy: Ready for Vercel"
Write-Host ""

Write-Host "üîß CRITICAL: Database Connection Issue" -ForegroundColor Red
Write-Host "Error: Can't reach database server at db.jqqduvdldrsjkvaiqxxy.supabase.co:5432"
Write-Host ""
Write-Host "Solution Steps:"
Write-Host "1. Go to Supabase Dashboard: https://app.supabase.com/project/your-project"
Write-Host "2. Check project status and database health"
Write-Host "3. Configure IP allowlist:"
Write-Host "   - Settings > Database > Connection Security"
Write-Host "   - Add your current IP address"
Write-Host "   - Or temporarily allow 'All IPs' for testing"
Write-Host "4. Test connection: cd backend && npx prisma db pull"
Write-Host ""

Write-Host "üöÄ DEPLOY STEPS:" -ForegroundColor Green
Write-Host ""
Write-Host "STEP 1: Fix Database Connection"
Write-Host "   - Resolve Supabase IP allowlist issue"
Write-Host "   - Test connection with: npx prisma db pull"
Write-Host ""
Write-Host "STEP 2: Run Database Migrations"
Write-Host "   cd backend"
Write-Host "   npx prisma migrate deploy"
Write-Host ""
Write-Host "STEP 3: Create Admin User"
Write-Host "   cd backend"
Write-Host "   node scripts/createAdminProd.cjs"
Write-Host ""
Write-Host "STEP 4: Deploy to Vercel"
Write-Host "   Backend:"
Write-Host "   - Install Vercel CLI: npm install -g vercel"
Write-Host "   - Login: vercel login"
Write-Host "   - Deploy: vercel --prod"
Write-Host ""
Write-Host "   Frontend:"
Write-Host "   - Go to Vercel Dashboard: https://vercel.com/dashboard"
Write-Host "   - Import GitHub repository"
Write-Host "   - Configure build settings:"
Write-Host "     * Framework: Vite"
Write-Host "     * Build Command: npm run build"
Write-Host "     * Output Directory: dist"
Write-Host "     * Install Command: npm install"
Write-Host "   - Set environment variables:"
Write-Host "     * VITE_API_URL: [your-backend-url]"
Write-Host "     * VITE_STRIPE_PUBLIC_KEY: [your-stripe-public-key]"
Write-Host "   - Deploy"
Write-Host ""

Write-Host "üìö AVAILABLE SCRIPTS:" -ForegroundColor Cyan
Write-Host "   .\scripts\deploy-simple.ps1     - Complete deploy automation"
Write-Host "   .\scripts\setup-db-simple.ps1   - Database configuration"
Write-Host "   .\scripts\test-db.ps1          - Database connection test"
Write-Host "   .\scripts\fix-db.ps1           - Database issue resolution"
Write-Host "   .\scripts\deploy-vercel-simple.ps1 - Vercel deploy guide"
Write-Host ""

Write-Host "‚ö†Ô∏è  IMPORTANT NOTES:" -ForegroundColor Yellow
Write-Host "   - Database connection must be fixed before deploy"
Write-Host "   - Update SMTP credentials in .env.production"
Write-Host "   - Update Stripe keys in .env.production"
Write-Host "   - Change admin password after first login"
Write-Host "   - Monitor application logs after deploy"
Write-Host ""

Write-Host "üéâ SUCCESS CRITERIA:" -ForegroundColor Green
Write-Host "   ‚úÖ Database connection working"
Write-Host "   ‚úÖ Migrations executed successfully"
Write-Host "   ‚úÖ Admin user created"
Write-Host "   ‚úÖ Backend deployed to Vercel"
Write-Host "   ‚úÖ Frontend deployed to Vercel"
Write-Host "   ‚úÖ Application accessible and functional"
Write-Host "   ‚úÖ Payment system working"
Write-Host "   ‚úÖ Email notifications working"
Write-Host "   ‚úÖ Admin panel accessible"
Write-Host "   ‚úÖ VIP user creation working"
Write-Host "   ‚úÖ Streaming functionality working"
Write-Host ""

Write-Host "üìû SUPPORT:" -ForegroundColor Cyan
Write-Host "   - Documentation: PRODUCTION_DEPLOY.md"
Write-Host "   - Stripe Setup: STRIPE_SETUP.md"
Write-Host "   - Database Setup: SUPABASE_SETUP.md"
Write-Host "   - General Deploy: DEPLOY.md"
Write-Host ""

Write-Host "üéØ NEXT IMMEDIATE ACTION:"
Write-Host "   1. Fix database connection issue in Supabase"
Write-Host "   2. Test connection with: cd backend && npx prisma db pull"
Write-Host "   3. Once database is working, proceed with full deploy"
Write-Host ""

Write-Host "Your Youth Angola Streaming is almost ready for production!" -ForegroundColor Yellow